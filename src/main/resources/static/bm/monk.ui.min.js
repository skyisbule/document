/*!
 * monk.ui.js
 * version: 0.3.5
 * author: 百小僧（QQ：8020292）
 * site：http://www.baisoft.org
 * QQ群：123049073
 * https://github.com/MonkSoul/Monk.UI/
 */
!function(n){"use strict";if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var t=module.exports||exports;n(t)}else typeof define=="function"&&define.amd?define(["exports"],n):n(window.monk={})}(function(n){var t=typeof n!="undefined"?n:{};t.v="0.3.5";t.nextAll=function(n){function i(n){var i=n.nextElementSibling;i&&(t.push(i),arguments.callee(i))}var t=[];return i(n),t};t.setRequireIconOffset=function(n,t){var f=this,i=n.querySelector(".monk-iconfont.icon-monk-required"),e=n.querySelector(".monk-clear-input"),u,r;i&&e&&(t?(u=f.nextAll(i),r=0,Array.prototype.forEach.call(u,function(n){n&&(r+=n.offsetWidth)}),i.style.right=-r+"px"):i.style.right="0px")};t.inputInit=function(){var n=document.querySelectorAll(".monk-form-input,.monk-form-textarea");Array.prototype.forEach.call(n,function(n){var f=n.parentNode,i,e,r,o,u;t.setRequireIconOffset(f,!0);n.addEventListener("focus",function(){var n=this.parentNode;n.classList.add("focus")});n.addEventListener("blur",function(){var n=this.parentNode;n.classList.contains("monk-form-time-wrap")||n.classList.remove("focus")});n.addEventListener("keyup",function(){var n=this.parentNode,r=this.value.trim(),i=n.querySelector(".monk-clear-input");i&&(r!=""?(i.style.cssText="visibility:visible;",t.setRequireIconOffset(n)):(i.style.cssText="visibility:hidden;",t.setRequireIconOffset(n,!0)))});n.addEventListener("change",function(){var n=this.parentNode,r=this.value.trim(),i=n.querySelector(".monk-clear-input");i&&r==""&&(i.style.cssText="visibility:hidden;",t.setRequireIconOffset(n,!0))});n.parentElement.addEventListener("click",function(){this.querySelector(".monk-form-input,.monk-form-textarea").focus()});i=n.parentNode.querySelector(".monk-clear-input");i&&(e=n.value,e!=""?(i.style.cssText="visibility:visible;",t.setRequireIconOffset(f)):i.style.cssText="visibility:hidden;",i.addEventListener("click",function(){var n=this.parentNode,i=n.querySelector(".monk-form-input,.monk-form-textarea");i.value="";t.setRequireIconOffset(n,!0);this.style.cssText="visibility:hidden;"}));n.style.width="";r=n.parentNode.parentNode.offsetWidth;o=n.parentNode.offsetWidth;o>=r&&(u=0,Array.prototype.filter.call(n.parentNode.children,function(t){t!==n&&(u+=t.offsetWidth)}),n.style.width=r-u-2+"px")})}();t.createCheckboxRadio=function(n){var t,i;n.length>0&&(t=n[0],n.splice(0,1),i=document.querySelectorAll(".monk-form-"+t+"-list"),Array.prototype.forEach.call(i,function(n){var i="",u=n.querySelectorAll(".monk-"+t),r;Array.prototype.forEach.call(u,function(n){var r=n.getAttribute("name"),u=n.value,f=n.getAttribute("text"),o=n.getAttribute("checked"),s=n.getAttribute("readonly"),h=n.getAttribute("disabled"),c=u?'data-value="'+u+'"':'data-value=""',l=r?'data-name="'+r+'" ':"",e=f?f:"value",a=o?'checked="checked"':"",v=s?'readonly="readonly"':"",y=h?'disabled="disabled"':"";i+='<div class="monk-form-wrap monk-form-'+t+'-wrap" '+l+" "+a+" "+v+" "+y+" "+c+">";t=="checkbox"||t=="switch"?(i+='<span class="monk-'+t+'-text">'+e+"<\/span>",i+='<span class="monk-iconfont border-left icon-monk-dagou"><\/span>'):t=="radio"&&(i+='<span class="monk-iconfont icon-monk-radio"><\/span>',i+='<span class="monk-radio-text">'+e+"<\/span>");i+="<\/div>\r\n";n.addEventListener("click",function(){var n=this.getAttribute("readonly");if(n)return!1});n.addEventListener("change",function(){var u=this.getAttribute("name"),f=this.value,r=this.parentNode,n=r.querySelector(".monk-form-"+t+"-wrap[data-name='"+u+"'][data-value='"+f+"']"),i;this.checked==!0?t=="radio"?(i=r.querySelector(".monk-form-radio-wrap[checked='checked']"),i!==n&&(i.removeAttribute("checked"),n.setAttribute("checked","checked"))):n.setAttribute("checked","checked"):t!="radio"&&n.removeAttribute("checked")})});n.insertAdjacentHTML("afterbegin",i);r=n.querySelectorAll(".monk-form-"+t+"-wrap");Array.prototype.forEach.call(r,function(n){n.addEventListener("click",function(){var u=this.getAttribute("checked"),f=this.getAttribute("readonly"),e=this.getAttribute("disabled"),o=this.getAttribute("data-name"),s=this.getAttribute("data-value"),i,n,r;f!="readonly"&&e!="disabled"&&(i=this.parentNode,n=i.querySelector(".monk-"+t+"[name='"+o+"'][value='"+s+"']"),t=="radio"?(r=i.querySelector(".monk-form-"+t+"-wrap[checked='checked']"),r!==this&&r.removeAttribute("checked"),this.setAttribute("checked","checked"),n.checked=!0):u=="checked"?(this.removeAttribute("checked"),n.checked=!1):(this.setAttribute("checked","checked"),n.checked=!0))})})}),arguments.callee(n))}(["checkbox","switch","radio"]);t.selectInit=function(){function n(n){var r=n.value,u=n.parentNode,t=u.parentNode.querySelector(".monk-form-select"),i=t.querySelector(".monk-form-option[data-text*='"+r+"']");i&&(t.scrollTop=i.offsetTop)}var u=document.querySelectorAll(".monk-form-select"),t,i,r;Array.prototype.forEach.call(u,function(n){var e=n.parentNode.querySelector(".monk-form-select-wrap"),t,i,f;n.style.width=e.offsetWidth+"px";t="";i=n.querySelectorAll(".monk-select *");Array.prototype.forEach.call(i,function(n){var i,r,u;n.tagName.toLowerCase()=="option"?(i=n.textContent,r=n.getAttribute("value"),t+='<div class="monk-form-option" data-value="'+r+'" data-text="'+i+'">'+i+"<\/div>"):n.tagName.toLowerCase()=="optgroup"&&(u=n.getAttribute("label"),t+='<div class="monk-form-optgroup" data-value="'+r+'">'+u+"<\/div>")});n.insertAdjacentHTML("afterbegin",t);var r=n.querySelector(".monk-select"),u=r.querySelectorAll("option")[r.selectedIndex],o=u.value,s=u.textContent;n.querySelector(".monk-form-option[data-value='"+o+"']").setAttribute("selected","selected");n.parentNode.querySelector(".monk-form-select-wrap .monk-form-input").setAttribute("value",s);f=n.querySelectorAll(".monk-form-option");Array.prototype.forEach.call(f,function(n){n.addEventListener("mousedown",function(){var i=this.getAttribute("data-value"),u=this.textContent,t=this.parentNode,f=this.offsetTop,e=t.querySelector(".monk-select"),r=t.parentNode.querySelector(".monk-form-input"),o=r.getAttribute("readonly"),n;o||i!=""&&(n=this.parentNode.querySelector(".monk-form-option[selected='selected']"),n!==this&&n&&n.removeAttribute("selected"),this.setAttribute("selected","selected"),r.value=u,t.scrollTop=f,e.value=i)})})});t=document.querySelectorAll(".monk-form-select-wrap .monk-form-input");Array.prototype.forEach.call(t,function(t){t.addEventListener("focus",function(){var t=this.parentNode,i=t.parentNode.querySelector(".monk-form-select");i.classList.remove("monk-none");n(this)});t.addEventListener("blur",function(){var n=this.parentNode,t=n.parentNode.querySelector(".monk-form-select");t.classList.add("monk-none")});t.addEventListener("keyup",function(){n(this)})});i=document.querySelectorAll(".monk-select-arrow");Array.prototype.forEach.call(i,function(n){n.addEventListener("mousedown",function(){var n=this.parentNode.querySelector(".monk-form-select-wrap .monk-form-input"),t=n.getAttribute("disabled"),i=n.parentNode.parentNode.querySelector(".monk-form-select");t!="disabled"&&(i.classList.contains("monk-none")?setTimeout(function(){n.focus()},100):n.blur())})});r=document.querySelectorAll(".monk-select");Array.prototype.forEach.call(r,function(n){n.addEventListener("change",function(){var t=this.querySelectorAll("option")[n.selectedIndex],r=t.value,u=t.textContent,t=this.parentNode.querySelector(".monk-form-option[data-value='"+r+"']"),f=this.parentNode.parentNode.querySelector(".monk-form-select-wrap .monk-form-input"),i=this.parentNode.querySelector(".monk-form-option[selected='selected']");i!==this&&i&&i.removeAttribute("selected");t.setAttribute("selected","selected");f.value=u;this.parentNode.scrollTop=t.offsetTop})})}();t.timeInit=function(){function f(){var t='<div class="monk-form-time monk-none">',n;for(t+='<div class="monk-form-time-title">',t+="<span>小时<\/span><span>分钟<\/span><span>秒钟<\/span>",t+="<\/div>",t+='<div class="monk-form-time-list">',t+='<div class="monk-form-time-item">',n=0;n<24;n++)t+=n<10?'<span class="monk-form-time-hour" data-value="0'+n+'">0'+n+"<\/span>":'<span class="monk-form-time-hour" data-value="'+n+'">'+n+"<\/span>";for(t+="<\/div>",t+='<div class="monk-form-time-item">',n=0;n<60;n++)t+=n<10?'<span class="monk-form-time-minute" data-value="0'+n+'">0'+n+"<\/span>":'<span class="monk-form-time-minute" data-value="'+n+'">'+n+"<\/span>";for(t+="<\/div>",t+='<div class="monk-form-time-item">',n=0;n<60;n++)t+=n<10?'<span class="monk-form-time-second" data-value="0'+n+'">0'+n+"<\/span>":'<span class="monk-form-time-second" data-value="'+n+'">'+n+"<\/span>";return t+="<\/div>",t+="<\/div>",t+='<div class="monk-form-time-btn"><span class="monk-time-current">当前时间<\/span><span class="monk-time-close">关闭<\/span><\/div>',t+"<\/div>"}function n(n,t,i){var u=t.textContent.trim(),r=t.parentNode.querySelector(".monk-form-time-"+i[1]+".selected");r!==t&&r&&r.classList.remove("selected");n[i[0]]=u}var e=document.querySelectorAll(".monk-form-time-wrap"),t,i,r,u;Array.prototype.forEach.call(e,function(n){var t=n.querySelector(".monk-form-input"),r=t.value,i;/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/.test(r)||(t.value="00:00:00");n.insertAdjacentHTML("afterend",f());i=n.parentNode.querySelector(".monk-form-time");i.style.width=n.offsetWidth+"px"});t=document.querySelectorAll(".monk-form-time-wrap .monk-form-input");Array.prototype.forEach.call(t,function(n){n.addEventListener("focus",function(){var c=this.parentNode,l=c.parentNode.querySelector(".monk-form-time");l.classList.remove("monk-none");var a=this.value,n=a.match(/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/),w=n[0],v=n[1],y=n[3],p=n[4],t=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(1)"),i=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(2)"),r=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(3)"),u=t.querySelector(".monk-form-time-hour[data-value='"+v+"']"),f=i.querySelector(".monk-form-time-minute[data-value='"+y+"']"),e=r.querySelector(".monk-form-time-second[data-value='"+p+"']"),o=t.querySelector(".monk-form-time-hour.selected"),s=i.querySelector(".monk-form-time-minute.selected"),h=r.querySelector(".monk-form-time-second.selected");o?o.classList.remove("selected"):"";s?s.classList.remove("selected"):"";h?h.classList.remove("selected"):"";t.scrollTop=u.offsetTop;i.scrollTop=f.offsetTop;r.scrollTop=e.offsetTop;u.classList.add("selected");f.classList.add("selected");e.classList.add("selected")});n.addEventListener("blur",function(){var u=this.value;if(!/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/.test(u)){var t=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(1) .monk-form-time-hour.selected"),i=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(2) .monk-form-time-minute.selected"),r=this.parentNode.parentNode.querySelector(".monk-form-time-item:nth-child(3) .monk-form-time-second.selected"),n=[];n[0]=t?t.getAttribute("data-value"):"00";n[1]=i?i.getAttribute("data-value"):"00";n[2]=r?r.getAttribute("data-value"):"00";this.value=n.join(":")}})});i=document.querySelectorAll(".monk-form-time-hour,.monk-form-time-minute ,.monk-form-time-second");Array.prototype.forEach.call(i,function(t){t.addEventListener("click",function(){var i=this.parentNode.parentNode.parentNode.parentNode.querySelector(".monk-form-time-wrap .monk-form-input"),u=i.getAttribute("readonly"),r,t;u||(r=i.value,/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/.test(r)||(i.value="00:00:00"),t=r.split(":"),t.length==0?t=["00","00","00"]:t.length==1?(t.push("00"),t.push("00")):t.length==2&&t.push("00"),this.classList.contains("monk-form-time-hour")?n(t,this,[0,"hour"]):this.classList.contains("monk-form-time-minute")?n(t,this,[1,"minute"]):this.classList.contains("monk-form-time-second")&&n(t,this,[2,"second"]),i.value=t.join(":"),this.classList.add("selected"))})});r=document.querySelectorAll(".monk-form-time-btn span");Array.prototype.forEach.call(r,function(n){n.addEventListener("click",function(){var r=this.parentNode.parentNode.parentNode.querySelector(".monk-form-time-wrap .monk-form-input"),f,u,n,t,i,e;this.classList.contains("monk-time-current")?(f=r.getAttribute("readonly"),f||(u=new Date,n=u.getHours(),n<10&&(n="0"+n),t=u.getMinutes(),t<10&&(t="0"+t),i=u.getSeconds(),i<10&&(i="0"+i),e=n+":"+t+":"+i,r.value=e,this.parentNode.querySelector(".monk-time-close").click())):this.classList.contains("monk-time-close")&&(this.parentNode.parentNode.classList.add("monk-none"),r.blur(),r.parentNode.classList.remove("focus"))})});u=document.querySelectorAll(".icon-monk-time");Array.prototype.forEach.call(u,function(n){n.addEventListener("mousedown",function(){var n=this.parentNode.querySelector(".monk-form-time-wrap .monk-form-input"),i=n.getAttribute("disabled"),t=n.parentNode.parentNode.querySelector(".monk-form-time");i!="disabled"&&(t.classList.contains("monk-none")?setTimeout(function(){n.focus()},100):(t.classList.add("monk-none"),n.blur(),n.parentNode.classList.remove("focus")))})})}();t.fileInit=function(){var n=document.querySelectorAll(".monk-file");Array.prototype.forEach.call(n,function(n){n.addEventListener("change",function(){var n=this.value;this.parentNode.parentNode.querySelector(".monk-form-input").value=n})})}();t.codeInit=function(){var n=document.querySelectorAll(".monk-code");Array.prototype.forEach.call(n,function(n){var t=n.getAttribute("data-language"),i=n.innerHTML;(t.toLowerCase()=="html"||t.toLowerCase()=="xml")&&(i=i.replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"));n.innerHTML='<ol class="monk-code-area"><li><code>'+i.replace(/[\r\t\n]+/g,"<\/code><\/li><li><code>")+'<\/code><\/li><\/ol><span class="monk-code-language">'+t+"<\/span>"})}();t.tppl_flag=["<%","%>"];t.tppl=function(n,t){var e=this,i=function(n){var t,r=[],u=[];for(t in n)r.push(t),u.push(n[t]);return new Function(r,i.$).apply(n,u)},f,u,r;if(!i.$){for(f=n.split(e.tppl_flag[0]),i.$="var $=''",u=0;u<f.length;u++)r=f[u].split(e.tppl_flag[1]),u!=0&&(i.$+="="==r[0].charAt(0)?"+("+r[0].substr(1)+")":";"+r[0].replace(/\r\n/g,"")+"$=$"),i.$+="+'"+r[r.length-1].replace(/\'/g,"\\'").replace(/\r\n/g,"\\n").replace(/\n/g,"\\n").replace(/\r/g,"\\n")+"'";i.$+=";return $;"}return t?i(t):i};t.resetForm=function(){function r(n){function i(n){if(n){if(n.parentNode.tagName.toLowerCase()=="form"){t=n.parentNode;return}arguments.callee(n.parentNode)}}var t;return i(n),t}function n(n,t){var i=n.querySelectorAll(".monk-"+t);Array.prototype.forEach.call(i,function(n){var r=n.getAttribute("name"),u=n.value,f=n.parentNode,i=f.querySelector(".monk-form-"+t+"-wrap[data-name='"+r+"'][data-value='"+u+"']");n.checked==!0?i.setAttribute("checked","checked"):i.removeAttribute("checked")})}var i=document.querySelector("input[type='reset']");i&&i.addEventListener("click",function(){var i=r(this),u,f;i&&(i.reset(),u=i.querySelectorAll(".monk-form-input,.monk-form-textarea"),Array.prototype.forEach.call(u,function(n){var i=n.parentNode,u=n.value.trim(),r=i.querySelector(".monk-clear-input");r&&(u!=""?(r.style.cssText="visibility:visible;",t.setRequireIconOffset(i)):(r.style.cssText="visibility:hidden;",t.setRequireIconOffset(i,!0)))}),n(i,"checkbox"),n(i,"switch"),n(i,"radio"),f=i.querySelectorAll(".monk-select"),Array.prototype.forEach.call(f,function(n){var t=n.querySelectorAll("option")[n.selectedIndex],r=t.value,u=t.textContent,i=n.parentNode.querySelector(".monk-form-option[selected='selected']");i?i.removeAttribute("selected"):"";n.parentNode.querySelector(".monk-form-option[data-value='"+r+"']").setAttribute("selected","selected");n.parentNode.parentNode.querySelector(".monk-form-select-wrap .monk-form-input").setAttribute("value",u)}))})}();window.onresize=function(){var n=document.querySelectorAll(".monk-form-input,.monk-form-textarea");Array.prototype.forEach.call(n,function(n){var t,r,i;n.style.width="";t=n.parentNode.parentNode.offsetWidth;r=n.parentNode.offsetWidth;r>=t&&(i=0,Array.prototype.filter.call(n.parentNode.children,function(t){t!==n&&(i+=t.offsetWidth)}),n.style.width=t-i-2+"px")})}});